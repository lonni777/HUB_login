# Проект автотестів логіну (Playwright + Python)

Проект для написання автотестів логіну в систему з використанням Playwright та Python.

## Встановлення

1. Встановіть залежності:
```bash
pip install -r requirements.txt
```

2. Встановіть браузери для Playwright:
```bash
playwright install
```

3. Створіть файл `.env` з конфігурацією:
```bash
# Скопіюйте структуру з прикладу нижче та заповніть реальними даними
```

## Налаштування секретів

### Створення .env файлу

Створіть файл `.env` в корені проекту з наступною структурою:

```env
# URL системи для тестування
TEST_BASE_URL=https://hubtest.kasta.ua
TEST_LOGIN_URL=https://hubtest.kasta.ua/user/login

# Дані для логіну (тестові облікові записи)
TEST_USER_EMAIL=your_test_email@example.com
TEST_USER_PASSWORD=your_test_password

# Дані для негативних тестів (неіснуючий користувач)
TEST_NON_EXISTENT_USER_EMAIL=nonexistent_user@kasta.ua

# URL після успішного логіну (для перевірки)
TEST_DASHBOARD_URL=https://hubtest.kasta.ua/dashboard
```

**⚠️ ВАЖЛИВО:** Файл `.env` не комітиться в Git (вже в .gitignore). Кожен розробник створює свій власний `.env` файл локально.

Детальніше про управління секретами див. [docs/SECRETS_MANAGEMENT.md](docs/SECRETS_MANAGEMENT.md)

## Запуск тестів

```bash
pytest
```

Запуск з детальним виводом:
```bash
pytest -v
```

Запуск конкретного тесту:
```bash
pytest tests/test_login.py::TestLogin::test_positive_login
```

## Структура проекту

Проект використовує **Page Object Model (POM)** для кращої підтримки та масштабованості:

```
.
├── config/
│   ├── __init__.py
│   └── settings.py              # Управління конфігурацією та секретами
├── docs/
│   ├── SECRETS_MANAGEMENT.md    # Документація по управлінню секретами
│   └── PRE_RUN_CHECKLIST.md      # Чеклист перед запуском тестів
├── locators/
│   ├── __init__.py
│   └── login_locators.py         # Локатори для сторінки логіну
├── pages/
│   ├── __init__.py
│   ├── base_page.py             # Базовий клас для всіх сторінок
│   └── login_page.py             # Page Object для сторінки логіну
├── tests/
│   ├── __init__.py
│   └── test_login.py            # Тести логіну
├── conftest.py                   # Конфігурація pytest та фікстури
├── pytest.ini                   # Налаштування pytest
├── requirements.txt              # Залежності проекту
├── .env                          # Секрети (НЕ комітиться в Git)
└── README.md                     # Документація
```

## Архітектура проекту (Page Object Model)

### Переваги POM:
- ✅ **Локатори в одному місці** - легко оновлювати для всіх тестів одразу
- ✅ **Повторне використання коду** - методи сторінок використовуються в багатьох тестах
- ✅ **Легка підтримка** - зміни в UI вимагають оновлення тільки Page Objects
- ✅ **Чистий код тестів** - тести стають читабельнішими та зрозумілішими

### Компоненти:

1. **locators/** - містить всі селектори елементів
   - `login_locators.py` - локатори для сторінки логіну

2. **pages/** - містить Page Objects (класи для роботи зі сторінками)
   - `base_page.py` - базовий клас з загальними методами
   - `login_page.py` - методи для роботи зі сторінкою логіну

3. **tests/** - містить тести
   - Тести використовують Page Objects замість прямого використання локаторів

## Як це працює

1. **Конфігурація** завантажується з `.env` файлу через `config/settings.py`
2. **Локатори** зберігаються в `locators/` для легкого оновлення
3. **Page Objects** інкапсулюють логіку роботи зі сторінками
4. **Тести** використовують Page Objects для виконання дій
5. **Секрети** не зберігаються в коді, тільки в `.env` файлі
6. **Валідація** конфігурації відбувається автоматично при запуску тестів

## Оновлення локаторів

Якщо змінився селектор елемента на сторінці:
1. Відкрийте відповідний файл в `locators/` (наприклад, `locators/login_locators.py`)
2. Оновіть потрібний локатор
3. Всі тести автоматично використають новий локатор через Page Objects
